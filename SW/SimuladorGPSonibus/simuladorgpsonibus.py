# Simulador GPS ônibus
# Dados:  Lista de coordenadas de cada linha de ônibus
# Protocolo: MQTT - Envia as coordenadas de cada linha

# Bibliotecas
import paho.mqtt.client as mqtt     # Para mandar os dados
import time                         # Para fazer o sleep
i = 1
l = 0
m = 0

print("Simulador de Ônibus")

rota020 = [ # Rota do Ônibus Interno do Campus do Pici
'-3.738785,-38.569710,', '-3.738526,-38.569721,',
'-3.738220,-38.570370,', '-3.738361,-38.571207,',
'-3.738584,-38.571577,', '-3.738958,-38.571802,',
'-3.739381,-38.572425,', '-3.740942,-38.574526,',
'-3.740975,-38.574818,', '-3.741109,-38.574992,',
'-3.741323,-38.574887,', '-3.742584,-38.574906,',
'-3.744269,-38.574966,', '-3.744711,-38.575239,',
'-3.745093,-38.576379,', '-3.745567,-38.577653,',
'-3.745992,-38.577949,', '-3.746926,-38.577694,',
'-3.747335,-38.577426,', '-3.747962,-38.576585,',
'-3.747882,-38.576010,', '-3.747047,-38.573424,',
'-3.746742,-38.572552,', '-3.746572,-38.572437,',
'-3.745542,-38.572885,', '-3.745146,-38.573043,',
'-3.744359,-38.574143,', '-3.743982,-38.574580,',
'-3.743420,-38.574826,', '-3.742819,-38.574785,',
'-3.741433,-38.574739,', '-3.741115,-38.574559,',
'-3.740678,-38.574053,', '-3.739535,-38.572441,',
'-3.739482,-38.572211,', '-3.739078,-38.571554,',
'-3.739119,-38.570566,', '-3.738958,-38.569723,'
]

rota075 = [ # Rota do Ônibus Campus do Pici Unifor
'-3.725339,-38.567848,','-3.725085,-38.565681,',
'-3.726100,-38.565353,','-3.726375,-38.565262,',
'-3.726935,-38.565179,','-3.727066,-38.565233,',
'-3.727162,-38.565434,','-3.727679,-38.568247,',
'-3.727893,-38.569194,','-3.727920,-38.569347,',
'-3.728709,-38.569382,','-3.729512,-38.569285,',
'-3.732098,-38.569141,','-3.732489,-38.572633,',
'-3.733886,-38.572445,','-3.736750,-38.572134,',
'-3.736980,-38.572045,','-3.737137,-38.571882,',
'-3.736940,-38.570106,','-3.737052,-38.569988,',
'-3.737309,-38.569926,','-3.737767,-38.569951,',
'-3.737903,-38.569910,','-3.737949,-38.569779,',
'-3.737981,-38.569293,','-3.738382,-38.569302,',
'-3.738872,-38.569162,','-3.738958,-38.569074,',
'-3.739043,-38.568934,','-3.739054,-38.568918,',
'-3.740609,-38.567746,','-3.741594,-38.567065,',
'-3.742413,-38.567837,','-3.742889,-38.567472,',
'-3.742965,-38.567317,','-3.742836,-38.567177,',
'-3.741953,-38.566297,','-3.740159,-38.557473,',
'-3.737622,-38.545317,','-3.737311,-38.543708,',
'-3.737493,-38.543129,','-3.737879,-38.542667,',
'-3.738628,-38.541938,','-3.740277,-38.539996,',
'-3.747589,-38.531488,','-3.750480,-38.528033,',
'-3.753403,-38.524718,','-3.753906,-38.523591,',
'-3.753831,-38.522454,','-3.753060,-38.515609,',
'-3.750962,-38.497863,','-3.750865,-38.497574,',
'-3.750640,-38.497466,','-3.747354,-38.496437,',
'-3.748221,-38.493551,','-3.749109,-38.490673,',
'-3.749229,-38.490324,','-3.749496,-38.490247,',
'-3.750065,-38.490327,','-3.753038,-38.490954,',
'-3.755918,-38.491512,','-3.756561,-38.491507,',
'-3.757075,-38.491078,','-3.757369,-38.490182,',
'-3.758076,-38.487500,','-3.758804,-38.484318,',
'-3.759055,-38.483862,','-3.759655,-38.483417,',
'-3.759623,-38.483439,','-3.760169,-38.483278,',
'-3.760838,-38.483160,','-3.765586,-38.482779,',
'-3.773390,-38.482060,','-3.775853,-38.481781,',
'-3.781906,-38.481186,','-3.781976,-38.482012,',
'-3.783287,-38.481915,','-3.783202,-38.481068,',
'-3.784465,-38.481003,','-3.785402,-38.480998,',
'-3.788185,-38.480687,','-3.788340,-38.482277,',
'-3.787090,-38.482387,','-3.786940,-38.480657,',
'-3.782597,-38.480976,','-3.776388,-38.481524,',
'-3.774450,-38.481652,','-3.769183,-38.481974,',
'-3.767855,-38.482178,','-3.766142,-38.482382,',
'-3.761089,-38.482908,','-3.759954,-38.483031,',
'-3.759307,-38.483310,','-3.758869,-38.483888,',
'-3.758605,-38.484683,','-3.758616,-38.484651,',
'-3.757101,-38.490713,','-3.756727,-38.491271,',
'-3.756245,-38.491416,','-3.754794,-38.491158,',
'-3.752621,-38.490729,','-3.749473,-38.490015,',
'-3.749262,-38.490015,','-3.749152,-38.490200,',
'-3.748847,-38.491166,','-3.748414,-38.492558,',
'-3.748221,-38.492960,','-3.747969,-38.493277,',
'-3.747640,-38.493352,','-3.747327,-38.493331,',
'-3.746631,-38.493119,','-3.745713,-38.495911,',
'-3.745689,-38.496010,','-3.745734,-38.496058,',
'-3.750699,-38.497638,','-3.750817,-38.497719,',
'-3.750844,-38.497880,','-3.751486,-38.503389,',
'-3.752214,-38.509773,','-3.753796,-38.523095,',
'-3.753785,-38.523672,','-3.753485,-38.524364,',
'-3.753250,-38.524718,','-3.752447,-38.525608,',
'-3.749894,-38.528588,','-3.749495,-38.529079,',
'-3.747289,-38.531649,','-3.741958,-38.537855,',
'-3.738296,-38.542131,','-3.737756,-38.542630,',
'-3.737408,-38.543027,','-3.737247,-38.543536,',
'-3.737242,-38.544019,','-3.738853,-38.551862,',
'-3.741883,-38.566464,','-3.740909,-38.567386,',
'-3.739207,-38.568599,','-3.738840,-38.568937,',
'-3.738457,-38.569103,','-3.738033,-38.569110,',
'-3.736977,-38.569087,','-3.736324,-38.569039,',
'-3.735743,-38.568926,','-3.735160,-38.568851,',
'-3.734598,-38.568829,','-3.733519,-38.568883,',
'-3.732151,-38.568972,','-3.730130,-38.569074,',
'-3.728990,-38.569175,','-3.728385,-38.569261,',
'-3.728072,-38.569232,','-3.727783,-38.569162,',
'-3.726456,-38.568733,','-3.725382,-38.568395,',
'-3.725358,-38.568019,'
]


# Cliente para Supervisionar
client = mqtt.Client(client_id="notelenovo",
                     protocol=mqtt.MQTTv31)
# Conecta ao Broker
client.connect("broker.hivemq.com", port=1883)

# Publica uma Mensagem de Teste
client.publish("sistema/linha/020", "Coordenadas Rota 020")
client.publish("sistema/linha/075", "Coordenadas Rota 075")

while(i == 1):
    print("Enviar - rota020 - Coord: " + str(l))
    print("Enviar - rota075 - Coord: " + str(m))
    msg020 = rota020[l]
    msg075 = rota075[m]
    client.publish("sistema/linha/020", msg020)
    client.publish("sistema/linha/075", msg075)
    l = l + 1
    m = m + 1
    if(l == len(rota020)):
        l = 0
        #client.publish("sistema/linha/020", 'Restart')
        #print("Enviar tudo de novo? 1-Sim 2-Nao")
        #i = int(input("> "))
    if(m == len(rota075)):
        m = 0
    time.sleep(3)

'''
Nome:   Rota Campus do Pici Interno
Length: 3.585 km (2.228 mi)
latitude	longitude   OBS: PONTOS COM 7 CASAS DE PRECISÃO
-3.7387856  -38.5697101
-3.7385269	-38.5697212
-3.7382200	-38.5703706
-3.7383619	-38.5712075
-3.7385840	-38.5715776
-3.7389587	-38.5718029
-3.7393816	-38.5724252
-3.7409420	-38.5745267
-3.7409757	-38.5748181
-3.7411095	-38.5749925
-3.7413236	-38.5748879
-3.7425842	-38.5749066
-3.7442696	-38.5749663
-3.7447112	-38.5752399
-3.7450939	-38.5763797
-3.7455677	-38.5776537
-3.7459923	-38.5779496
-3.7469260	-38.5776944
-3.7473355	-38.5774262
-3.7479624	-38.5765854
-3.7478821	-38.5760104
-3.7470470	-38.5734248
-3.7467423	-38.5725523
-3.7465724	-38.5724377
-3.7455420	-38.5728857
-3.7451460	-38.5730433
-3.7443592	-38.5741430
-3.7439821	-38.5745804
-3.7434205	-38.5748267
-3.7428198	-38.5747851
-3.7414334	-38.5747395
-3.7411159	-38.5745598
-3.7406786	-38.5740534
-3.7395358	-38.5724414
-3.7394822	-38.5722117
-3.7390781	-38.5715545
-3.7391197	-38.5705663
-3.7389584	-38.5697236
'''
'''
Nome:   Rota Campus do Pici Unifor
Length: 35.51 km (22.07 mi)
latitude	longitude   OBS: PONTOS COM 7 CASAS DE PRECISÃO
-3.7253398	-38.5678482
-3.7250856	-38.5656810
-3.7261000	-38.5653537
-3.7263757	-38.5652626
-3.7269351	-38.5651794
-3.7270662	-38.5652330
-3.7271626	-38.5654342
-3.7276792	-38.5682479
-3.7278933	-38.5691947
-3.7279200	-38.5693476
-3.7287097	-38.5693824
-3.7295126	-38.5692859
-3.7320982	-38.5691410
-3.7324890	-38.5726333
-3.7338860	-38.5724455
-3.7367500	-38.5721344
-3.7369800	-38.5720459
-3.7371379	-38.5718822
-3.7369400	-38.5701066
-3.7370523	-38.5699886
-3.7373093	-38.5699269
-3.7377670	-38.5699511
-3.7379034	-38.5699108
-3.7379490	-38.5697794
-3.7379811	-38.5692939
-3.7383825	-38.5693020
-3.7388723	-38.5691625
-3.7389580	-38.5690740
-3.7390436	-38.5689345
-3.7390543	-38.5689184
-3.7406094	-38.5677463
-3.7415944	-38.5670650
-3.7424134	-38.5678375
-3.7428898	-38.5674727
-3.7429656	-38.5673171
-3.7428363	-38.5671776
-3.7419530	-38.5662979
-3.7401598	-38.5574734
-3.7376224	-38.5453176
-3.7373119	-38.5437082
-3.7374939	-38.5431290
-3.7378794	-38.5426675
-3.7386288	-38.5419381
-3.7402775	-38.5399960
-3.7475897	-38.5314881
-3.7504802	-38.5280335
-3.7534030	-38.5247182
-3.7539061	-38.5235918
-3.7538313	-38.5224544
-3.7530604	-38.5156095
-3.7509620	-38.4978639
-3.7508656	-38.4975743
-3.7506408	-38.4974669
-3.7473541	-38.4964370
-3.7482213	-38.4935510
-3.7491099	-38.4906730
-3.7492290	-38.4903243
-3.7494966	-38.4902479
-3.7500654	-38.4903270
-3.7530389	-38.4909546
-3.7559189	-38.4915125
-3.7565611	-38.4915072
-3.7570750	-38.4910780
-3.7573695	-38.4901821
-3.7580760	-38.4875000
-3.7588040	-38.4843188
-3.7590556	-38.4838629
-3.7596551	-38.4834176
-3.7596230	-38.4834391
-3.7601690	-38.4832782
-3.7608381	-38.4831601
-3.7655862	-38.4827792
-3.7733909	-38.4820603
-3.7758532	-38.4817814
-3.7819068	-38.4811860
-3.7819763	-38.4820121
-3.7832878	-38.4819156
-3.7832021	-38.4810680
-3.7844653	-38.4810036
-3.7854020	-38.4809982
-3.7881855	-38.4806871
-3.7883407	-38.4822777
-3.7870908	-38.4823876
-3.7869409	-38.4806576
-3.7825972	-38.4809768
-3.7763881	-38.4815240
-3.7744503	-38.4816527
-3.7691831	-38.4819746
-3.7678557	-38.4821784
-3.7661428	-38.4823823
-3.7610897	-38.4829080
-3.7599549	-38.4830314
-3.7593072	-38.4833103
-3.7588696	-38.4838884
-3.7586059	-38.4846836
-3.7586166	-38.4846514
-3.7571017	-38.4907132
-3.7567271	-38.4912711
-3.7562453	-38.4914160
-3.7547947	-38.4911585
-3.7526214	-38.4907293
-3.7494739	-38.4900159
-3.7492624	-38.4900159
-3.7491527	-38.4902009
-3.7488476	-38.4911665
-3.7484140	-38.4925586
-3.7482213	-38.4929609
-3.7479697	-38.4932774
-3.7476405	-38.4933525
-3.7473274	-38.4933311
-3.7466315	-38.4931192
-3.7457134	-38.4959114
-3.7456893	-38.4960106
-3.7457348	-38.4960589
-3.7506997	-38.4976387
-3.7508175	-38.4977192
-3.7508443	-38.4978801
-3.7514866	-38.5033894
-3.7522146	-38.5097730
-3.7537964	-38.5230955
-3.7537857	-38.5236722
-3.7534859	-38.5243642
-3.7532504	-38.5247183
-3.7524474	-38.5256088
-3.7498941	-38.5285887
-3.7494953	-38.5290796
-3.7472899	-38.5316491
-3.7419583	-38.5378557
-3.7382969	-38.5421312
-3.7377562	-38.5426301
-3.7374083	-38.5430270
-3.7372477	-38.5435367
-3.7372424	-38.5440194
-3.7388536	-38.5518623
-3.7418834	-38.5664642
-3.7409092	-38.5673868
-3.7392070	-38.5685992
-3.7388402	-38.5689372
-3.7384575	-38.5691035
-3.7380332	-38.5691102
-3.7369774	-38.5690874
-3.7363243	-38.5690391
-3.7357435	-38.5689264
-3.7351600	-38.5688514
-3.7345980	-38.5688299
-3.7335193	-38.5688835
-3.7321516	-38.5689720
-3.7301308	-38.5690740
-3.7289906	-38.5691759
-3.7283857	-38.5692617
-3.7280726	-38.5692322
-3.7277835	-38.5691625
-3.7264560	-38.5687333
-3.7253827	-38.5683954
-3.7253586	-38.5680199
'''
